<!DOCTYPE html>
<html lang="en">

<%- include("../partials/head") %>

<body>
    <%- include("../partials/navbar") %>
    
    <main class="gallery">
        <% books.forEach(book=> { %>
            <a href="/books/<%= book._id %>">
                <article class="card">
                    <img src="<%= book.image %>" alt="Book cover of <%= book.title %>">
                    <h3><%= book.title %></h3>
                    <p>Author: <%= book.author %> </p>
                    <p>
                        <% const rating = Math.round(book.reviews.reduce( (acc, review) => acc + review.rating, 0) / book.reviews.length); %>
                        <% for (let i = 1; i <= rating; i++) { %>
                            &#9733;
                        <% } %>
                    </p>
                </article>
            </a>
        <% }); %>
    </main>
</body>

</html>